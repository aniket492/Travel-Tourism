<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Register Here</title>
    <link rel="icon" href="./assets/files/logo.png" />
    <link rel="stylesheet" type="text/css" href="./assets/css/style.css" />
    <link rel="stylesheet" type="text/css" href="./assets/css/booking.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Paytone+One&family=Poppins:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet" />
</head>

<body>
    <div>
        <nav>
            <img src="./assets/files/logo.png" class="logo" alt="Logo" title="FirstFlight Travels">
            <ul class="navbar">
                <li>
                    <a href="index.html">Home</a>
                    <a href="./index.html#package">Packages</a>
                    <a href="./index.html#locations">Locations</a>
                    <a href="./info.html">About Us</a>
                    <a href="./contact.html">Contact Us</a>
                </li>
            </ul>
        </nav>
    </div>

    <div class="booking">  
        <h1>Booking Online Now</h1>
        <p>Please fill out this form with the required information</p>
        <form action="" id="booking-form">
            <fieldset>
                <label>First Name: *
                    <input type="text" class="data" name="firstname" placeholder="Enter first name" required /></label>
                <label>Last Name: *
                    <input type="text" name="lastname" placeholder="Enter last name" required />
                </label>
                <label>Email: *
                    <input type="email" name="email" placeholder="Enter Email" required />
                </label>
                <label>Phone Number: *
                    <input type="text" name="phone" placeholder="Enter Phone number" required />
                </label>

                <label>Check-in Date: *
                    <input type="date" name="check-in-date" required />
                </label>
                <label>Check-out Date: *
                    <input type="date" name="check-out-date" required />
                </label>
            </fieldset>
            <fieldset>
                <label> Accomodation Type: *
                    <select name="accomodation" id="accomodation">
                        <option value="">Select One</option>
                        <option value="1">Hotel</option>
                        <option value="2">Self-Catered</option>
                        <option value="3">Hostel</option>
                        <option value="4">Guesthouse</option>
                    </select>
                </label><br>

                <label>Number of room: * <input type="number" name="age" min="1" max="120" class="room" /><br><br>
                    <label>Room Type: * <br>
                        <label>
                            <input type="radio" name="room-type" class="inline" /> Single Room
                        </label><br>
                        <label>
                            <input type="radio" name="room-type" class="inline" /> Double Room
                        </label><br>
                        <label>
                            <input type="radio" name="room-type" class="inline" /> Triple Room
                        </label><br>
                        <label>
                            <input type="radio" name="room-type" class="inline" /> Quad Bedroom
                        </label>
                    </label>
                </label><br>

                <label>Additional Requests
                    <textarea name="additional" rows="5" cols="30" placeholder="Your message ..."></textarea>
                </label>
            </fieldset>
            <input type="submit" value="Submit" ONCLICK="alert('Booked successfully! \nEnjoy your journey')" class="submit-btn" />
        </form>
    </div>

    <!-- Footer -->
    <section class="footer">
        <div class="foot">
            <div class="footer-content">
                <div class="footlinks">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="./booking.html">Register</a></li>
                        <li><a href="./info.html">About Us</a></li>
                        <li><a href="./contact.html">Contact Us</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- JavaScript -->
    <script>
        document.getElementById('booking-form').addEventListener('submit', async function(e) {
            e.preventDefault(); // prevent default form submission
        
            const formData = {
                firstname: this.firstname.value,
                lastname: this.lastname.value,
                email: this.email.value,
                phone: this.phone.value,
                checkInDate: this['check-in-date'].value,
                checkOutDate: this['check-out-date'].value,
                accomodation: this.accomodation.value,
                rooms: this.age.value,
                roomType: document.querySelector('input[name="room-type"]:checked')?.nextSibling.textContent.trim(),
                additional: this.additional.value,
            };
        
            try {
                const response = await fetch('http://localhost:3000/submit-form', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(formData),
                });
        
                const result = await response.json();
                alert(result.message); // Show server response
            } catch (error) {
                console.error('Error:', error);
                alert('Failed to book. Please try again.');
            }
        });
        </script>
        
</body>
</html>